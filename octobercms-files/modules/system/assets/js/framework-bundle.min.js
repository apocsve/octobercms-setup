(()=>{"use strict";var e={};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.amdO={};var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,i,o;return n=e,o=[{key:"load",value:function(t,n){return(new e).loadCollection(t,n)}}],(i=[{key:"loadCollection",value:function(e,t){var n=this,i=e.js?e.js:[],o=e.css?e.css:[],a=e.img?e.img:[];i=r(i,(function(e){return!document.querySelector('head script[src="'+e+'"]')})),o=r(o,(function(e){return!document.querySelector('head link[href="'+e+'"]')}));var s=0,l=!1,u=!1;function c(){return!!u&&!!l&&!(s<o.length)&&void(t&&t())}0!==i.length||0!==o.length||0!==a.length?(this.loadJavaScript(i,(function(){l=!0,c()})),o.forEach((function(e){n.loadStyleSheet(e,(function(){s++,c()}))})),this.loadImage(a,(function(){u=!0,c()}))):t&&t()}},{key:"loadStyleSheet",value:function(e,t){var n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),n.addEventListener("load",t,!1),void 0!==n&&document.getElementsByTagName("head")[0].appendChild(n),n}},{key:"loadJavaScript",value:function(e,t){if(e.length<=0)return t();var n=this,r=e.shift(),i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",r),i.addEventListener("load",(function(){n.loadJavaScript(e,t)}),!1),void 0!==i&&document.getElementsByTagName("head")[0].appendChild(i)}},{key:"loadImage",value:function(e,t){if(e.length<=0)return t();var n=0;e.forEach((function(r){var i=new Image;i.onload=function(){++n==e.length&&t&&t()},i.src=r}))}}])&&t(n.prototype,i),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=[],r=e.length,i=0;i<r;i++)t(e[i])&&n.push(e[i]);return n}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("The request handler name is not specified.");if(!t.match(/^(?:\w+\:{2})?on*/))throw new Error('Invalid handler name. The correct handler name format is: "onEvent".');if("undefined"==typeof FormData)throw new Error("The browser does not support the FormData interface.");this.options=n,this.handler=t}var t,n,r;return t=e,n=[{key:"getRequestOptions",value:function(){return{method:"POST",url:this.options.url?this.options.url:window.location.href,headers:this.buildHeaders(),responseType:!1===this.options.download?"":"blob"}}},{key:"buildHeaders",value:function(){var e=this.handler,t=this.options,n={"X-Requested-With":"XMLHttpRequest","X-OCTOBER-REQUEST-HANDLER":e};t.files||(n["Content-Type"]=t.bulk?"application/json":"application/x-www-form-urlencoded"),t.flash&&(n["X-OCTOBER-REQUEST-FLASH"]=1),t.partial&&(n["X-OCTOBER-REQUEST-PARTIAL"]=t.partial);var r=this.extractPartials(t.update,t.partial);r&&(n["X-OCTOBER-REQUEST-PARTIALS"]=r);var i=this.getXSRFToken();i&&(n["X-XSRF-TOKEN"]=i);var o=this.getCSRFToken();return o&&(n["X-CSRF-TOKEN"]=o),t.headers&&t.headers.constructor==={}.constructor&&Object.assign(n,t.headers),n}},{key:"extractPartials",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=[];if(e){if("object"!==i(e))throw new Error("Invalid update value. The correct format is an object ({...})");for(var r in e)"_self"===r&&t?n.push(t):n.push(r)}return n.join("&")}},{key:"getCSRFToken",value:function(){var e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null}},{key:"getXSRFToken",value:function(){var e=null;if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].replace(/^([\s]*)|([\s]*)$/g,"");if("XSRF-TOKEN="==r.substring(0,11)){e=decodeURIComponent(r.substring(11));break}}return e}}],r=[{key:"fetch",value:function(e,t){return new this(e,t).getRequestOptions()}}],n&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.target,r=t.detail,i=t.cancelable,o=void 0===i||i,a=new CustomEvent(e,{bubbles:!0,cancelable:!0===o,detail:r||{}});return(n||document).dispatchEvent(a),a}function l(e){setTimeout(e,1)}function u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=c(f(e,n)).split("\n"),o=i[0].match(/^\s+/),a=o?o[0].length:0;return i.map((function(e){return e.slice(a)})).join("\n")}function c(e){return e.replace(/^\n/,"")}function f(e,t){return e.reduce((function(e,n,r){return e+n+(null==t[r]?"":t[r])}),"")}function h(e){return Array.prototype.slice.call(e)}function d(){return Array.apply(null,{length:36}).map((function(e,t){return 8==t||13==t||18==t||23==t?"-":14==t?"4":19==t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16)})).join("")}function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=/[^.]*(?=\..*)\.|.*/,w=/\..*/,k=/::\d+$/,E={},S=1,A={mouseenter:"mouseover",mouseleave:"mouseout"},j=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]),O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"on",value:function(e,t,n,r){C(e,t,n,r,!1)}},{key:"one",value:function(e,t,n,r){C(e,t,n,r,!0)}},{key:"off",value:function(e,t,n,r){if("string"==typeof t&&e){var i=y(R(t,n,r),3),o=i[0],a=i[1],s=i[2],l=s!==t,u=T(e),c=u[s]||{},f=t.startsWith(".");if(void 0===a){if(f)for(var h=0,d=Object.keys(u);h<d.length;h++)q(e,u,d[h],t.slice(1));for(var p=0,v=Object.keys(c);p<v.length;p++){var m=v[p],g=m.replace(k,"");if(!l||t.includes(g)){var b=c[m];L(e,u,s,b.callable,b.delegationSelector)}}}else{if(!c)return;L(e,u,s,a,o?n:null)}}}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.target,r=t.detail,i=t.cancelable,o=void 0===i||i;return s(e,{target:n,detail:r,cancelable:o})}}],(n=null)&&g(t.prototype,n),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e,t){return t&&"".concat(t,"::").concat(S++)||e.uidEvent||S++}function T(e){var t=x(e);return e.uidEvent=t,E[t]=E[t]||{},E[t]}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(e).find((function(e){return e.callable===t&&e.delegationSelector===n}))}function R(e,t,n){var r,i="string"==typeof t,o=i?n:t,a=(r=(r=e).replace(w,""),A[r]||r);return j.has(a)||(a=e),[i,o,a]}function C(e,t,n,r,i){if("string"==typeof t&&e){var o=y(R(t,n,r),3),a=o[0],s=o[1],l=o[2];if(t in A){s=function(e){return function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)}}(s)}var u=T(e),c=u[l]||(u[l]={}),f=P(c,s,a?n:null);if(f)f.oneOff=f.oneOff&&i;else{var h=x(s,t.replace(b,"")),d=a?function(e,t,n){return function r(i){for(var o=e.querySelectorAll(t),a=i.target;a&&a!==this;a=a.parentNode){var s,l=p(o);try{for(l.s();!(s=l.n()).done;){if(s.value===a)return i.delegateTarget=a,r.oneOff&&O.off(e,i.type,t,n),n.apply(a,[i])}}catch(e){l.e(e)}finally{l.f()}}}}(e,n,s):function(e,t){return function n(r){return r.delegateTarget=e,n.oneOff&&O.off(e,r.type,t),t.apply(e,[r])}}(e,s);d.delegationSelector=a?n:null,d.callable=s,d.oneOff=i,d.uidEvent=h,c[h]=d,e.addEventListener(l,d)}}}function L(e,t,n,r,i){var o=P(t[n],r,i);o&&(e.removeEventListener(n,o),delete t[n][o.uidEvent])}function q(e,t,n,r){for(var i=t[n]||{},o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];if(s.includes(r)){var l=i[s];L(e,t,n,l.callable,l.delegationSelector)}}}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=0,F=-1,I=-2,M=-3,H=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.failed=!1,this.progress=0,this.sent=!1,this.delegate=t,this.url=n,this.options=r,this.headers=r.headers||{},this.method=r.method||"GET",this.responseType=r.responseType||"",this.data=r.data,this.timeout=r.timeout||0,this.requestProgressed=function(e){e.lengthComputable&&i.setProgress(e.loaded/e.total)},this.requestLoaded=function(){i.endRequest((function(e){i.processResponseData(e,(function(e,t){var n=e.getResponseHeader("Content-Type"),r=function(e){return(e||"").includes("application/json")}(n)?JSON.parse(t):t;if(i.options.htmlOnly&&!function(e){return(e||"").match(/^text\/html|^application\/xhtml\+xml/)}(n))return i.failed=!0,void i.delegate.requestFailedWithStatusCode(I);e.status>=200&&e.status<300?i.delegate.requestCompletedWithResponse(r,e.status,function(e,t){if(e.getResponseHeader("X-OCTOBER-LOCATION"))return e.getResponseHeader("X-OCTOBER-LOCATION");var n=t.match(/^(.*)#/);return(n?n[1]:t)!==e.responseURL?e.responseURL:null}(e,i.url)):(i.failed=!0,i.delegate.requestFailedWithStatusCode(e.status,r))}))}))},this.requestFailed=function(){i.endRequest((function(){i.failed=!0,i.delegate.requestFailedWithStatusCode(D)}))},this.requestTimedOut=function(){i.endRequest((function(){i.failed=!0,i.delegate.requestFailedWithStatusCode(F)}))},this.requestCanceled=function(){i.options.trackAbort?i.endRequest((function(){i.failed=!0,i.delegate.requestFailedWithStatusCode(M)})):i.endRequest()},this.createXHR()}var t,n,r;return t=e,n=[{key:"send",value:function(){this.xhr&&!this.sent&&(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(this.data||null),this.sent=!0,this.delegate.requestStarted())}},{key:"abort",value:function(){this.xhr&&this.sent&&this.xhr.abort()}},{key:"notifyApplicationBeforeRequestStart",value:function(){O.dispatch("ajax:request-start",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"notifyApplicationAfterRequestEnd",value:function(){O.dispatch("ajax:request-end",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"createXHR",value:function(){var e=this.xhr=new XMLHttpRequest;for(var t in e.open(this.method,this.url,!0),e.responseType=this.responseType,e.onprogress=this.requestProgressed,e.onload=this.requestLoaded,e.onerror=this.requestFailed,e.ontimeout=this.requestTimedOut,e.onabort=this.requestCanceled,this.timeout&&(e.timeout=1e3*this.timeout),this.headers)e.setRequestHeader(t,this.headers[t]);return e}},{key:"endRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.xhr&&(this.notifyApplicationAfterRequestEnd(),e(this.xhr),this.destroy())}},{key:"setProgress",value:function(e){this.progress=e,this.delegate.requestProgressed(e)}},{key:"destroy",value:function(){this.setProgress(1),this.delegate.requestFinished()}},{key:"processResponseData",value:function(e,t){if("blob"===this.responseType){var n=e.getResponseHeader("Content-Disposition")||"";if(0!==n.indexOf("attachment")&&0!==n.indexOf("inline")){var r=new FileReader;r.addEventListener("load",(function(){t(e,r.result)})),r.readAsText(e.response)}else t(e,e.response)}else t(e,e.responseText)}}],n&&B(t.prototype,n),r&&B(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U="pending",V="rejected",_="resolved",J=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t||{},this.stateStr=U,this.successFuncs=[],this.failureFuncs=[],this.progressFuncs=[],this.resolveArgs=[],this.rejectArgs=[],this.progressArgs=[],this.isProgressNotified=!1}var t,n,r;return t=e,n=[{key:"resolve",value:function(){return this.stateStr===U&&(this.resolveArgs=arguments,this.callFunction.call(this,this.successFuncs,this.resolveArgs),this.stateStr=_),this}},{key:"reject",value:function(){return this.stateStr===U&&(this.rejectArgs=arguments,this.callFunction.call(this,this.failureFuncs,this.rejectArgs),this.stateStr=V),this}},{key:"notify",value:function(){return this.stateStr===U&&(this.progressArgs=arguments,this.callFunction.call(this,this.progressFuncs,this.progressArgs),this.isProgressNotified=!0),this}},{key:"abort",value:function(){this.options.delegate&&this.options.delegate.abort()}},{key:"done",value:function(){var e=Array.prototype.slice.call(arguments);return this.successFuncs=this.successFuncs.concat(e),this.stateStr===_&&this.callFunction.call(this,e,this.resolveArgs),this}},{key:"fail",value:function(){var e=Array.prototype.slice.call(arguments);return this.failureFuncs=this.failureFuncs.concat(e),this.stateStr===V&&this.callFunction.call(this,e,this.rejectArgs),this}},{key:"progress",value:function(){var e=Array.prototype.slice.call(arguments);return this.progressFuncs=this.progressFuncs.concat(e),this.stateStr===U&&this.isProgressNotified&&this.callFunction.call(this,e,this.progressArgs),this}},{key:"always",value:function(){var e=Array.prototype.slice.call(arguments);return this.successFuncs=this.successFuncs.concat(e),this.failureFuncs=this.failureFuncs.concat(e),this.stateStr!==U&&this.callFunction.call(this,e,this.resolveArgs||this.rejectArgs),this}},{key:"then",value:function(){var e=[];for(var t in arguments){var n;n=Array.isArray(arguments[t])?arguments[t]:[arguments[t]],e.push(n)}return this.done.apply(this,e[0]),this.fail.apply(this,e[1]),this.progress.apply(this,e[2]),this}},{key:"promise",value:function(){var e=["resolve","reject","promise","notify"],t={};for(var n in this)-1===e.indexOf(n)&&(t[n]=this[n]);return t}},{key:"state",value:function(){return arguments.length>0&&(stateStr=arguments[0]),stateStr}},{key:"callFunction",value:function(e,t,n){var r=(n=n||{}).scope||this;for(var i in e){var o=e[i];"function"==typeof o&&o.apply(r,t)}}}],n&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Q(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W="replace",z="prepend",G="append",Z="update",Y=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t.el,this.delegate=t,this.context=n,this.options=r,this.context.start=this.start.bind(this),this.context.success=this.success.bind(this),this.context.error=this.error.bind(this),this.context.complete=this.complete.bind(this)}var t,r,i;return t=e,(r=[{key:"invoke",value:function(e,t){return this.options[e]?this.options[e].apply(this.context,t):this[e]?this[e].apply(this,Q(t)):void 0}},{key:"invokeFunc",value:function(e,t){if(this.options[e])return this.options[e](this.el,t)}},{key:"start",value:function(e){this.invoke("markAsUpdating",[!0])}},{key:"success",value:function(e,t,n){if(!1!==this.invoke("beforeUpdate",[e,t,n])&&!1!==this.invokeFunc("beforeUpdateFunc",e)&&this.delegate.applicationAllowsUpdate(e,t,n)&&!(this.delegate.options.download&&e instanceof Blob&&this.invoke("handleFileDownload",[e,n]))){if(this.delegate.options.flash&&e.X_OCTOBER_FLASH_MESSAGES)for(var r in e.X_OCTOBER_FLASH_MESSAGES)this.invoke("handleFlashMessage",[e.X_OCTOBER_FLASH_MESSAGES[r],r]);var i=this,o=this.invoke("handleUpdateResponse",[e,t,n]);return o.done((function(){i.delegate.notifyApplicationRequestSuccess(e,t,n),i.invokeFunc("successFunc",e)})),o}}},{key:"error",value:function(e,t,n){var r,i=new J,o=this;if(!(void 0!==window.ocUnloading&&window.ocUnloading||t==M))return this.delegate.toggleRedirect(!1),406==t&&e?(r=e.X_OCTOBER_ERROR_MESSAGE,i=this.invoke("handleUpdateResponse",[e,t,n])):(r=e,i.resolve()),i.done((function(){o.el!==document&&o.el.setAttribute("data-error-message",r),o.delegate.applicationAllowsError(e,t,n)&&!1!==o.invokeFunc("errorFunc",e)&&o.invoke("handleErrorMessage",[r])})),i}},{key:"complete",value:function(e,t,n){this.delegate.notifyApplicationRequestComplete(e,t,n),this.invokeFunc("completeFunc",e),this.invoke("markAsUpdating",[!1])}},{key:"handleConfirmMessage",value:function(e){var t=this,n=new J;return n.done((function(){t.delegate.sendInternal()})),!this.delegate.notifyApplicationConfirmMessage(e,n).defaultPrevented&&(e?confirm(e):void 0)}},{key:"handleFlashMessage",value:function(e,t){}},{key:"handleErrorMessage",value:function(e){this.delegate.notifyApplicationErrorMessage(e).defaultPrevented||e&&alert(e)}},{key:"handleValidationMessage",value:function(e,t){if(this.delegate.notifyApplicationBeforeValidate(e,t),this.delegate.formEl){var n=!0;for(var r in t){var i=r.replace(/\.(\w+)/g,"[$1]"),o=("."+r).replace(/\.(\w+)/g,"[$1]"),a=['[name="'+i+'"]:not([disabled])','[name="'+i+'[]"]:not([disabled])','[name$="'+o+'"]:not([disabled])','[name$="'+o+'[]"]:not([disabled])'],s=this.delegate.formEl.querySelector(a.join(", "));if(s){var l=this.delegate.notifyApplicationFieldInvalid(s,r,t[r],n);n&&(l.defaultPrevented||s.focus(),n=!1)}}}}},{key:"handleRedirectResponse",value:function(e){this.delegate.notifyApplicationBeforeRedirect().defaultPrevented||(oc.useTurbo&&oc.useTurbo()?oc.visit(e):location.assign(e))}},{key:"markAsUpdating",value:function(e){var t=this.options.update||{};for(var n in t){var r=t[n],i=[];t._self&&n==this.options.partial&&this.delegate.partialEl?(r=t._self,i=[this.delegate.partialEl]):i=ee(r,'[data-ajax-partial="'+n+'"]'),i.forEach((function(t){e?t.setAttribute("data-ajax-updating",""):t.removeAttribute("data-ajax-updating")}))}}},{key:"handleUpdateResponse",value:function(e,t,r){var i=this,o=this.options.update||{},a=new J;return a.done((function(){var n=function(){var n=o[a]||a,s=[];o._self&&a==i.options.partial&&i.delegate.partialEl?(n=o._self,s=[i.delegate.partialEl]):s=ee(n,'[data-ajax-partial="'+a+'"]'),s.forEach((function(o){var s=function(e,t){if("string"==typeof e){if("!"===e.charAt(0))return W;if("@"===e.charAt(0))return G;if("^"===e.charAt(0))return z}return void 0!==t.dataset.ajaxUpdateMode?t.dataset.ajaxUpdateMode:Z}(n,o);if(s===W){var l=o.parentNode;o.insertAdjacentHTML("afterEnd",e[a]),l.removeChild(o),te(l,e[a])}else s===G?(o.insertAdjacentHTML("beforeEnd",e[a]),te(o,e[a])):s===z?(o.insertAdjacentHTML("afterBegin",e[a]),te(o,e[a])):(i.delegate.notifyApplicationBeforeReplace(o),o.innerHTML=e[a],function(e){Array.from(e.querySelectorAll("script")).forEach((function(e){var t=document.createElement("script");Array.from(e.attributes).forEach((function(e){return t.setAttribute(e.name,e.value)})),t.appendChild(document.createTextNode(e.innerHTML)),e.parentNode.replaceChild(t,e)}))}(o));i.delegate.notifyApplicationAjaxUpdate(o,e,t,r)}))};for(var a in e)n();setTimeout((function(){i.delegate.notifyApplicationUpdateComplete(e,t,r),i.invoke("afterUpdate",[e,t,r]),i.invokeFunc("afterUpdateFunc",e)}),0)})),e.X_OCTOBER_REDIRECT&&this.delegate.toggleRedirect(e.X_OCTOBER_REDIRECT),this.delegate.isRedirect&&this.invoke("handleRedirectResponse",[this.delegate.options.redirect]),e.X_OCTOBER_ERROR_FIELDS&&this.invoke("handleValidationMessage",[e.X_OCTOBER_ERROR_MESSAGE,e.X_OCTOBER_ERROR_FIELDS]),e.X_OCTOBER_ASSETS?n.load(e.X_OCTOBER_ASSETS,(function(){return a.resolve()})):a.resolve(),a}},{key:"handleFileDownload",value:function(e,t){if(this.options.browserTarget)return window.open(window.URL.createObjectURL(e),this.options.browserTarget),!0;var n="string"==typeof this.options.download?this.options.download:function(e){var t=e.getResponseHeader("Content-Disposition");if(!t)return null;for(var n=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/g,r=null,i=null;null!==(i=n.exec(t));)r=i;return null!==r&&r[1]?null===/filename[^;*=\n]*\*=[^']*''/.exec(r[0])?r[1].replace(/['"]/g,""):decodeURIComponent(r[1].substring(r[1].indexOf("''")+2)):null}(t);if(n){var r=document.createElement("a");return r.href=window.URL.createObjectURL(e),r.download=n,r.target="_blank",r.click(),window.URL.revokeObjectURL(r.href),!0}}},{key:"applyQueryToUrl",value:function(e){for(var t=new URLSearchParams(window.location.search),n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.set(i,e[i])}var o=window.location.pathname+"?"+t.toString();oc.useTurbo&&oc.useTurbo()?oc.visit(o,{action:"swap",scroll:!1}):(history.replaceState(null,"",o),localStorage.setItem("ocPushStateReferrer",o))}}])&&K(t.prototype,r),i&&K(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ee(e,t){return!0===e?document.querySelectorAll(t):"string"!=typeof e?[e]:-1===["#",".","@","^","!","="].indexOf(e.charAt(0))?[]:(-1!==["@","^","!","="].indexOf(e.charAt(0))&&(e=e.substring(1)),e||(e=t),document.querySelectorAll(e))}function te(e,t){var n=document.createElement("div");n.innerHTML=t,Array.from(n.querySelectorAll("script")).forEach((function(t){var n=document.createElement("script");Array.from(t.attributes).forEach((function(e){return n.setAttribute(e.name,e.value)})),n.appendChild(document.createTextNode(t.innerHTML)),e.appendChild(n),e.removeChild(n)}))}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"assignToObj",value:function(t,n,r){(new e).assignObjectInternal(t,n,r)}},{key:"serializeJSON",value:function(t){return(new e).parseContainer(t)}}],(n=[{key:"parseContainer",value:function(e){var t=this,n={};return e.querySelectorAll("input, select").forEach((function(e){t.assignObjectInternal(n,e.name,e.value)})),n}},{key:"assignObjectInternal",value:function(e,t,n){this.assignObjectNested(e,this.nameToArray(t),n)}},{key:"assignObjectNested",value:function(e,t,n){var r=e,i=t.length-1;t.forEach((function(e,t){void 0===r[e]&&(r[e]={}),t===i&&(r[e]=n),r=r[e]}))}},{key:"nameToArray",value:function(e){for(var t,n=/([^\]\[]+)/g,r=[];t=n.exec(e);)r.push(t[0]);return r}}])&&ne(t.prototype,n),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oe,ae=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userData=t||{},this.targetEl=n,this.formEl=r}var t,n,r;return t=e,(n=[{key:"getRequestData",value:function(){var e;return e=this.formEl?new FormData(this.formEl):new FormData,this.appendSingleInputElement(e),e}},{key:"getAsFormData",value:function(){return this.appendJsonToFormData(this.getRequestData(),this.userData)}},{key:"getAsQueryString",value:function(){return this.convertFormDataToQuery(this.getAsFormData())}},{key:"getAsJsonData",value:function(){return JSON.stringify(this.convertFormDataToJson(this.getAsFormData()))}},{key:"appendSingleInputElement",value:function(e){if(!this.formEl&&this.targetEl&&-1!==["INPUT","SELECT"].indexOf(this.targetEl.tagName)){var t=this.targetEl.name;t&&void 0===this.userData[t]&&("file"===this.targetEl.type?this.targetEl.files.forEach((function(n){e.append(t,n)})):e.append(t,this.targetEl.value))}}},{key:"appendJsonToFormData",value:function(e,t,n){var r=this;for(var i in t){var o=i;n&&(o=n+"["+i+"]");var a=t[i];a&&a.constructor==={}.constructor?this.appendJsonToFormData(e,a,o):a&&a.constructor===[].constructor?a.forEach((function(t,n){t.constructor==={}.constructor||t.constructor===[].constructor?r.appendJsonToFormData(e,t,o+"["+n+"]"):e.append(o+"[]",r.castJsonToFormData(t))})):e.append(o,this.castJsonToFormData(a))}return e}},{key:"convertFormDataToQuery",value:function(e){var t=this.formDataToArray(e);return Object.keys(t).map((function(e){return e.endsWith("[]")?t[e].map((function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}},{key:"convertFormDataToJson",value:function(e){var t=this.formDataToArray(e),n={};for(var r in t)re.assignToObj(n,r,t[r]);return n}},{key:"formDataToArray",value:function(e){return Object.fromEntries(Array.from(e.keys()).map((function(t){return[t,t.endsWith("[]")?e.getAll(t):e.getAll(t).pop()]})))}},{key:"castJsonToFormData",value:function(e){return null===e?"":!0===e?"1":!1===e?"0":e}}])&&ie(t.prototype,n),r&&ie(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.hiding=!1,this.value=0,this.visible=!1,this.trickle=function(){t.setValue(t.value+Math.random()/100)}}var t,n,r;return t=e,n=[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.cssClass&&this.progressElement.classList.add(e.cssClass),this.visible||(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())}},{key:"hide",value:function(){var e=this;this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement((function(){e.uninstallProgressElement(),e.stopTrickling(),e.visible=!1,e.hiding=!1})))}},{key:"setValue",value:function(e){this.value=e,this.refresh()}},{key:"installStylesheetElement",value:function(){e.stylesheetReady||(document.head.insertBefore(this.stylesheetElement,document.head.firstChild),e.stylesheetReady=!0)}},{key:"installProgressElement",value:function(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}},{key:"fadeProgressElement",value:function(t){this.progressElement.style.opacity="0",setTimeout(t,1.5*e.animationDuration)}},{key:"uninstallProgressElement",value:function(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}},{key:"startTrickling",value:function(){this.trickleInterval||(this.trickleInterval=setInterval(this.trickle,e.animationDuration))}},{key:"stopTrickling",value:function(){clearInterval(this.trickleInterval),delete this.trickleInterval}},{key:"refresh",value:function(){var e=this;requestAnimationFrame((function(){e.progressElement.style.width="".concat(10+90*e.value,"%")}))}},{key:"createStylesheetElement",value:function(){var t=document.createElement("style");return t.textContent=e.defaultCSS,t}},{key:"createProgressElement",value:function(){var e=document.createElement("div");return e.className="oc-progress-bar",e}}],r=[{key:"defaultCSS",get:function(){return u(oe||(t=["\n        .oc-progress-bar {\n            position: fixed;\n            display: block;\n            top: 0;\n            left: 0;\n            height: 3px;\n            background: #0076ff;\n            z-index: 9999;\n            transition:\n                width ","ms ease-out,\n                opacity ","ms ","ms ease-in;\n            transform: translate3d(0, 0, 0);\n        }\n    "],n||(n=t.slice(0)),oe=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))),e.animationDuration,e.animationDuration/2,e.animationDuration/2);var t,n}},{key:"progressBar",get:function(){return{show:function(){var e=ce();e.setValue(0),e.show()},hide:function(){var e=ce();e.setValue(100),e.hide()}}}}],n&&se(t.prototype,n),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ce(){return ue.instance||(ue.instance=new ue),ue.instance}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}le(ue,"instance",null),le(ue,"stylesheetReady",!1),le(ue,"animationDuration",300);const ye=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.handler=n,this.options=he(he({},this.constructor.DEFAULTS),r||{}),this.context={el:t,handler:n,options:this.options},this.progressBar=new ue,this.showProgressBar=function(){i.progressBar.show({cssClass:"is-ajax"})}}var t,n,r;return t=e,r=[{key:"DEFAULTS",get:function(){return{handler:null,update:{},files:!1,bulk:!1,download:!1,browserValidate:!1,browserTarget:null,progressBarDelay:500,progressBar:null}}},{key:"send",value:function(t,n){return new e(document,t,n).start()}},{key:"sendElement",value:function(t,n,r){return"string"==typeof t&&(t=document.querySelector(t)),new e(t,n,r).start()}}],(n=[{key:"start",value:function(){if(this.notifyApplicationAjaxSetup(),this.initOtherElements(),this.preprocessOptions(),this.actions=new Y(this,this.context,this.options),this.validateClientSideForm()&&this.applicationAllowsRequest()){var e,t=new ae(this.options.data,this.el,this.formEl);e=this.options.files?t.getAsFormData():this.options.bulk?t.getAsJsonData():t.getAsQueryString(),this.options.query&&this.actions.invoke("applyQueryToUrl",[this.options.query]);var n=a.fetch(this.handler,this.options),r=n.url,i=n.headers,o=n.method,s=n.responseType;if(this.request=new H(this,r,{method:o,headers:i,responseType:s,data:e,trackAbort:!0}),this.promise=new J({delegate:this.request}),this.isRedirect=this.options.redirect&&this.options.redirect.length>0,!this.options.confirm||this.actions.invoke("handleConfirmMessage",[this.options.confirm]))return this.sendInternal(),this.promise}}},{key:"sendInternal",value:function(){var e=this;this.notifyApplicationBeforeSend(),this.notifyApplicationAjaxPromise(),this.promise.fail((function(t,n,r){e.isRedirect||e.notifyApplicationAjaxFail(t,n,r)})).done((function(t,n,r){e.isRedirect||e.notifyApplicationAjaxDone(t,n,r)})).always((function(t,n,r){e.notifyApplicationAjaxAlways(t,n,r)})),this.request.send()}},{key:"toggleRedirect",value:function(e){e?(this.options.redirect=e,this.isRedirect=!0):(this.options.redirect=null,this.isRedirect=!1)}},{key:"applicationAllowsRequest",value:function(){return!this.notifyApplicationBeforeRequest().defaultPrevented}},{key:"applicationAllowsUpdate",value:function(e,t,n){return!this.notifyApplicationBeforeUpdate(e,t,n).defaultPrevented}},{key:"applicationAllowsError",value:function(e,t,n){return!this.notifyApplicationRequestError(e,t,n).defaultPrevented}},{key:"notifyApplicationAjaxSetup",value:function(){return s("ajax:setup",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxPromise",value:function(){return s("ajax:promise",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxFail",value:function(e,t,n){return s("ajax:fail",{target:this.el,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationAjaxDone",value:function(e,t,n){return s("ajax:done",{target:this.el,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationAjaxAlways",value:function(e,t,n){return s("ajax:always",{target:this.el,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationAjaxUpdate",value:function(e,t,n,r){return s("ajax:update",{target:e,detail:{context:this.context,data:t,responseCode:n,xhr:r}})}},{key:"notifyApplicationBeforeRedirect",value:function(){return s("ajax:before-redirect",{target:this.el})}},{key:"notifyApplicationBeforeRequest",value:function(){return s("ajax:before-request",{target:this.triggerEl,detail:{context:this.context}})}},{key:"notifyApplicationBeforeUpdate",value:function(e,t,n){return s("ajax:before-update",{target:this.triggerEl,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationRequestSuccess",value:function(e,t,n){return s("ajax:request-success",{target:this.triggerEl,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationRequestError",value:function(e,t,n){return s("ajax:request-error",{target:this.triggerEl,detail:{context:this.context,message:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationRequestComplete",value:function(e,t,n){return s("ajax:request-complete",{target:this.triggerEl,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationBeforeValidate",value:function(e,t){return s("ajax:before-validate",{target:this.triggerEl,detail:{context:this.context,message:e,fields:t}})}},{key:"notifyApplicationBeforeReplace",value:function(e){return s("ajax:before-replace",{target:e})}},{key:"notifyApplicationBeforeSend",value:function(){return s("ajax:before-send",{target:window,detail:{context:this.context}})}},{key:"notifyApplicationUpdateComplete",value:function(e,t,n){return s("ajax:update-complete",{target:window,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationFieldInvalid",value:function(e,t,n,r){return s("ajax:invalid-field",{target:window,detail:{element:e,fieldName:t,errorMsg:n,isFirst:r}})}},{key:"notifyApplicationConfirmMessage",value:function(e,t){return s("ajax:confirm-message",{target:window,detail:{message:e,promise:t}})}},{key:"notifyApplicationErrorMessage",value:function(e){return s("ajax:error-message",{target:window,detail:{message:e}})}},{key:"requestStarted",value:function(){this.markAsProgress(!0),this.toggleLoadingElement(!0),this.options.progressBar&&this.showProgressBarAfterDelay(),this.actions.invoke("start",[this.request.xhr])}},{key:"requestProgressed",value:function(e){this.promise.notify(e)}},{key:"requestCompletedWithResponse",value:function(e,t){this.actions.invoke("success",[e,t,this.request.xhr]),this.actions.invoke("complete",[e,t,this.request.xhr]),this.promise.resolve(e,t,this.request.xhr)}},{key:"requestFailedWithStatusCode",value:function(e,t){this.actions.invoke("error",[t,e,this.request.xhr]),this.actions.invoke("complete",[t,e,this.request.xhr]),this.promise.reject(t,e,this.request.xhr)}},{key:"requestFinished",value:function(){this.markAsProgress(!1),this.toggleLoadingElement(!1),this.options.progressBar&&this.hideProgressBar()}},{key:"initOtherElements",value:function(){"string"==typeof this.options.form?this.formEl=document.querySelector(this.options.form):this.options.form?this.formEl=this.options.form:this.formEl=this.el&&this.el!==document?this.el.closest("form"):null,this.triggerEl=this.formEl?this.formEl:this.el,this.partialEl=this.el&&this.el!==document?this.el.closest("[data-ajax-partial]"):null,this.loadingEl="string"==typeof this.options.loading?document.querySelector(this.options.loading):this.options.loading}},{key:"preprocessOptions",value:function(){void 0===this.options.partial&&this.partialEl&&void 0!==this.partialEl.dataset.ajaxPartial&&(this.options.partial=this.partialEl.dataset.ajaxPartial||!0)}},{key:"validateClientSideForm",value:function(){return!(this.options.browserValidate&&"function"==typeof document.createElement("input").reportValidity&&this.formEl&&!this.formEl.checkValidity()&&(this.formEl.reportValidity(),1))}},{key:"toggleLoadingElement",value:function(e){this.loadingEl&&("function"==typeof this.loadingEl.show&&"function"==typeof this.loadingEl.hide?e?this.loadingEl.show():this.loadingEl.hide():this.loadingEl.style.display=e?"block":"none")}},{key:"showProgressBarAfterDelay",value:function(){this.progressBar.setValue(0),this.progressBarTimeout=window.setTimeout(this.showProgressBar,this.options.progressBarDelay)}},{key:"hideProgressBar",value:function(){this.progressBar.setValue(100),this.progressBar.hide(),null!=this.progressBarTimeout&&(window.clearTimeout(this.progressBarTimeout),delete this.progressBarTimeout)}},{key:"markAsProgress",value:function(e){e?(document.documentElement.setAttribute("data-ajax-progress",""),this.formEl&&this.formEl.setAttribute("data-ajax-progress",this.handler)):(document.documentElement.removeAttribute("data-ajax-progress"),this.formEl&&this.formEl.removeAttribute("data-ajax-progress"))}}])&&pe(t.prototype,n),r&&pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.oc||(window.oc={}),window.oc.AjaxRequest||(window.oc.AjaxRequest=ye,window.oc.AssetManager=n,window.oc.ajax=ye.send,window.oc.request||(window.oc.request=ye.sendElement));var ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"paramToObj",value:function(e,t){if(void 0===t&&(t=""),"object"===ve(t))return t;"{"!==t.charAt(0)&&(t="{"+t+"}");try{return this.parseJSON(t)}catch(t){throw new Error("Error parsing the "+e+" attribute value. "+t)}}},{key:"parseJSON",value:function(t){return JSON.parse((new e).parseString(t))}}],(n=[{key:"parseString",value:function(e){if(!(e=e.trim()).length)throw new Error("Broken JSON object.");for(var t="";e&&","===e[0];)e=e.substr(1);if('"'===e[0]||"'"===e[0]){if(e[e.length-1]!==e[0])throw new Error("Invalid string JSON object.");for(var n='"',r=1;r<e.length;r++)if("\\"===e[r])"'"===e[r+1]||(n+=e[r]),n+=e[r+1],r++;else{if(e[r]===e[0])return n+='"';'"'===e[r]?n+='\\"':n+=e[r]}throw new Error("Invalid string JSON object.")}if("true"===e||"false"===e)return e;if("null"===e)return"null";var i=parseFloat(e);if(!isNaN(i))return i.toString();if("{"===e[0]){var o="needKey";for(t="{",r=1;r<e.length;r++)if(!this.isBlankChar(e[r]))if("needKey"!==o||'"'!==e[r]&&"'"!==e[r]){if("needKey"===o&&this.canBeKeyHead(e[r])){var a;t+='"',t+=a=this.parseKey(e,r),t+='"',r+=a.length-1,o="afterKey"}else if("afterKey"===o&&":"===e[r])t+=":",o=":";else if(":"===o)r=r+(n=this.getBody(e,r)).originLength-1,t+=this.parseString(n.body),o="afterBody";else if("afterBody"===o||"needKey"===o){for(var s=r;","===e[s]||this.isBlankChar(e[s]);)s++;if("}"===e[s]&&s===e.length-1){for(;","===t[t.length-1];)t=t.substr(0,t.length-1);return t+="}"}s!==r&&"{"!==t&&(t+=",",o="needKey",r=s-1)}}else t+='"'+(a=this.parseKey(e,r+1,e[r]))+'"',r+=a.length,r+=1,o="afterKey";throw new Error("Broken JSON object near "+t)}if("["===e[0]){for(t="[",o="needBody",r=1;r<e.length;r++)if(" "!==e[r]&&"\n"!==e[r]&&"\t"!==e[r])if("needBody"===o){if(","===e[r]){t+="null,";continue}if("]"===e[r]&&r===e.length-1)return","===t[t.length-1]&&(t=t.substr(0,t.length-1)),t+="]";r=r+(n=this.getBody(e,r)).originLength-1,t+=this.parseString(n.body),o="afterBody"}else if("afterBody"===o)if(","===e[r])for(t+=",",o="needBody";","===e[r+1]||this.isBlankChar(e[r+1]);)","===e[r+1]&&(t+="null,"),r++;else if("]"===e[r]&&r===e.length-1)return t+="]";throw new Error("Broken JSON array near "+t)}}},{key:"parseKey",value:function(e,t,n){for(var r="",i=t;i<e.length;i++){if(n&&n===e[i])return r;if(!n&&(" "===e[i]||":"===e[i]))return r;r+=e[i],"\\"===e[i]&&i+1<e.length&&(r+=e[i+1],i++)}throw new Error("Broken JSON syntax near "+r)}},{key:"getBody",value:function(e,t){if('"'===e[t]||"'"===e[t]){for(var n=e[t],r=t+1;r<e.length;r++)if("\\"===e[r])n+=e[r],r+1<e.length&&(n+=e[r+1]),r++;else{if(e[r]===e[t])return{originLength:(n+=e[t]).length,body:n};n+=e[r]}throw new Error("Broken JSON string body near "+n)}if("t"===e[t]){if(e.indexOf("true",t)===t)return{originLength:"true".length,body:"true"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if("f"===e[t]){if(e.indexOf("f",t)===t)return{originLength:"false".length,body:"false"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if("n"===e[t]){if(e.indexOf("null",t)===t)return{originLength:"null".length,body:"null"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if("-"===e[t]||"+"===e[t]||"."===e[t]||e[t]>="0"&&e[t]<="9"){for(n="",r=t;r<e.length;r++){if(!("-"===e[r]||"+"===e[r]||"."===e[r]||e[r]>="0"&&e[r]<="9"))return{originLength:n.length,body:n};n+=e[r]}throw new Error("Broken JSON number body near "+n)}if("{"===e[t]||"["===e[t]){var i=[e[t]];for(n=e[t],r=t+1;r<e.length;r++){if(n+=e[r],"\\"===e[r])r+1<e.length&&(n+=e[r+1]),r++;else if('"'===e[r])'"'===i[i.length-1]?i.pop():"'"!==i[i.length-1]&&i.push(e[r]);else if("'"===e[r])"'"===i[i.length-1]?i.pop():'"'!==i[i.length-1]&&i.push(e[r]);else if('"'!==i[i.length-1]&&"'"!==i[i.length-1])if("{"===e[r])i.push("{");else if("}"===e[r]){if("{"!==i[i.length-1])throw new Error("Broken JSON "+("{"===e[t]?"object":"array")+" body near "+n);i.pop()}else if("["===e[r])i.push("[");else if("]"===e[r]){if("["!==i[i.length-1])throw new Error("Broken JSON "+("{"===e[t]?"object":"array")+" body near "+n);i.pop()}if(!i.length)return{originLength:r-t,body:n}}throw new Error("Broken JSON "+("{"===e[t]?"object":"array")+" body near "+n)}throw new Error("Broken JSON body near "+e.substr(t-5>=0?t-5:0,50))}},{key:"canBeKeyHead",value:function(e){return"\\"!==e[0]&&(e[0]>="a"&&e[0]<="z"||e[0]>="A"&&e[0]<="Z"||"_"===e[0]||e[0]>="0"&&e[0]<="9"||"$"===e[0]||e.charCodeAt(0)>255)}},{key:"isBlankChar",value:function(e){return" "===e||"\n"===e||"\t"===e}}])&&me(t.prototype,n),r&&me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Se=function(){function e(t,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r||{},this.ogElement=t,this.element=this.findElement(t),this.element?(this.assignAsEval("beforeUpdateFunc","requestBeforeUpdate"),this.assignAsEval("afterUpdateFunc","requestAfterUpdate"),this.assignAsEval("successFunc","requestSuccess"),this.assignAsEval("errorFunc","requestError"),this.assignAsEval("completeFunc","requestComplete"),this.assignAsData("progressBar","requestProgressBar"),this.assignAsData("confirm","requestConfirm"),this.assignAsData("redirect","requestRedirect"),this.assignAsData("loading","requestLoading"),this.assignAsData("form","requestForm"),this.assignAsData("url","requestUrl"),this.assignAsData("bulk","requestBulk",{emptyAsTrue:!0}),this.assignAsData("files","requestFiles",{emptyAsTrue:!0}),this.assignAsData("flash","requestFlash",{emptyAsTrue:!0}),this.assignAsData("download","requestDownload",{emptyAsTrue:!0}),this.assignAsData("update","requestUpdate",{parseJson:!0}),this.assignAsData("query","requestQuery",{parseJson:!0}),this.assignAsData("browserTarget","browserTarget"),this.assignAsData("browserValidate","browserValidate",{emptyAsTrue:!0}),this.assignAsMetaData("update","ajaxRequestUpdate",{parseJson:!0,mergeValue:!0}),this.assignRequestData(),n||(n=this.getHandlerName()),ye.sendElement(this.element,n,this.options)):ye.send(n,this.options)}var t,n,r;return t=e,n=[{key:"findElement",value:function(e){if(!e||e===document)return null;if(e.matches("[data-request]"))return e;var t=e.closest("[data-request]");return t||e}},{key:"getHandlerName",value:function(){return this.element.dataset.dataRequest?this.element.dataset.dataRequest:this.element.getAttribute("data-request")}},{key:"assignAsEval",value:function(e,t){var n;(n=this.element.dataset[t]?this.element.dataset[t]:this.element.getAttribute("data-"+Ae(t)))&&(this.options[e]=function(e,t){return new Function("data",n).apply(e,[t])})}},{key:"assignAsData",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.parseJson,o=void 0!==i&&i,a=r.emptyAsTrue,s=void 0!==a&&a;null!==(n=this.element.dataset[t]?this.element.dataset[t]:this.element.getAttribute("data-"+Ae(t)))&&(this.options[e]=o?ge.paramToObj("data-"+Ae(t),n):this.castAttrToOption(n,s))}},{key:"assignAsMetaData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.mergeValue,i=void 0===r||r,o=n.parseJson,a=void 0!==o&&o,s=n.emptyAsTrue,l=void 0!==s&&s,u=document.documentElement.querySelector('head meta[name="'+Ae(t)+'"]');if(u){var c=u.getAttribute("content");c=a?ge.paramToObj(Ae(t),c):this.castAttrToOption(c,l),this.options[e]=i?we(we({},this.options[e]),c):c}}},{key:"castAttrToOption",value:function(e,t){return!(!t||""!==e)||"true"===e||"1"===e||"false"!==e&&"0"!==e&&e}},{key:"assignRequestData",value:function(){var e={};this.options.data&&Object.assign(e,this.options.data);var t=this.ogElement.getAttribute("data-request-data");t&&Object.assign(e,ge.paramToObj("data-request-data",t)),function(e,t){var n=[];if(!e.parentNode)return n;for(var r=e.parentNode.closest(t);r;)n.push(r),r=r.parentNode.closest(t);return n}(this.ogElement,"[data-request-data]").reverse().forEach((function(t){Object.assign(e,ge.paramToObj("data-request-data",t.getAttribute("data-request-data")))})),this.options.data=e}}],r=[{key:"fromElement",value:function(t,n,r){return"string"==typeof t&&(t=document.querySelector(t)),new e(t,n,r)}}],n&&Ee(t.prototype,n),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ae(e){return e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())}))}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Oe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.started=!1,this.documentVisible=!0}var t,n,r;return t=e,(n=[{key:"start",value:function(){var e=this;this.started||(window.onbeforeunload=this.documentOnBeforeUnload,addEventListener("DOMContentLoaded",(function(){return e.render()})),addEventListener("page:updated",(function(){return e.render()})),addEventListener("ajax:update-complete",(function(){return e.render()})),addEventListener("visibilitychange",(function(){return e.documentOnVisibilityChange()})),O.on(document,"submit","[data-request]",this.documentOnSubmit),O.on(document,"input","input[data-request][data-track-input]",this.documentOnKeyup),O.on(document,"change","select[data-request], input[type=radio][data-request], input[type=checkbox][data-request], input[type=file][data-request]",this.documentOnChange),O.on(document,"keydown","input[type=text][data-request], input[type=submit][data-request], input[type=password][data-request]",this.documentOnKeydown),O.on(document,"click","a[data-request], button[data-request], input[type=button][data-request], input[type=submit][data-request]",this.documentOnClick),this.started=!0)}},{key:"stop",value:function(){this.started&&(this.started=!1)}},{key:"render",value:function(e){O.dispatch("before-render"),O.dispatch("render"),dispatchEvent(new Event("resize")),this.documentOnRender(e)}},{key:"documentOnVisibilityChange",value:function(e){this.documentVisible=!document.hidden,this.documentVisible&&this.documentOnRender()}},{key:"documentOnRender",value:function(e){this.documentVisible&&document.querySelectorAll("[data-auto-submit]").forEach((function(e){var t=e.dataset.autoSubmit||0;e.removeAttribute("data-auto-submit"),setTimeout((function(){Se.fromElement(e)}),t)}))}},{key:"documentOnSubmit",value:function(e){e.preventDefault(),Se.fromElement(e.target)}},{key:"documentOnClick",value:function(e){e.preventDefault(),Se.fromElement(e.target)}},{key:"documentOnChange",value:function(e){Se.fromElement(e.target)}},{key:"documentOnKeyup",value:function(e){var t=e.target,n=t.dataset.ocLastValue;if(-1!==["email","number","password","search","text"].indexOf(t.type)&&(void 0===n||n!=t.value)){t.dataset.ocLastValue=t.value,void 0!==this.dataTrackInputTimer&&clearTimeout(this.dataTrackInputTimer);var r=t.getAttribute("data-track-input");r||(r=300);var i=this;this.dataTrackInputTimer=setTimeout((function(){i.lastDataTrackInputRequest&&i.lastDataTrackInputRequest.abort(),i.lastDataTrackInputRequest=Se.fromElement(t)}),r)}}},{key:"documentOnKeydown",value:function(e){"Enter"===e.key&&(e.preventDefault(),void 0!==this.dataTrackInputTimer&&clearTimeout(this.dataTrackInputTimer),Se.fromElement(e.target))}},{key:"documentOnBeforeUnload",value:function(e){window.ocUnloading=!0}}])&&je(t.prototype,n),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"bind",value:function(){this.bindRequestFunc(),this.bindRenderFunc(),this.bindjQueryEvents()}},{key:"bindRequestFunc",value:function(){var e=$.fn.request;$.fn.request=function(e,t){var n="object"===xe(t)?t:{};return new Se(this.get(0),e,n)},$.fn.request.Constructor=Se,$.request=function(e,t){return $(document).request(e,t)},$.fn.request.noConflict=function(){return $.fn.request=e,this}}},{key:"bindRenderFunc",value:function(){$.fn.render=function(e){$(document).on("render",e)}}},{key:"bindjQueryEvents",value:function(){this.migratejQueryEvent(document,"ajax:setup","ajaxSetup",["context"]),this.migratejQueryEvent(document,"ajax:promise","ajaxPromise",["context"]),this.migratejQueryEvent(document,"ajax:fail","ajaxFail",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:done","ajaxDone",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:always","ajaxAlways",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-redirect","ajaxRedirect"),this.migratejQueryEvent(document,"ajax:update","ajaxUpdate",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-replace","ajaxBeforeReplace"),this.migratejQueryEvent(document,"ajax:before-request","oc.beforeRequest",["context"]),this.migratejQueryEvent(document,"ajax:before-update","ajaxBeforeUpdate",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-success","ajaxSuccess",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-complete","ajaxComplete",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-error","ajaxError",["context","message","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-validate","ajaxValidation",["context","message","fields"]),this.migratejQueryEvent(window,"ajax:before-send","ajaxBeforeSend",["context"]),this.migratejQueryEvent(window,"ajax:update-complete","ajaxUpdateComplete",["context","data","responseCode","xhr"]),this.migratejQueryEvent(window,"ajax:invalid-field","ajaxInvalidField",["element","fieldName","errorMsg","isFirst"]),this.migratejQueryEvent(window,"ajax:confirm-message","ajaxConfirmMessage",["message","promise"]),this.migratejQueryEvent(window,"ajax:error-message","ajaxErrorMessage",["message"]),this.migratejQueryAttachData(document,"ajax:setup","a[data-request], button[data-request], form[data-request], a[data-handler], button[data-handler]")}},{key:"migratejQueryEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=this;$(e).on(t,(function(e){i.triggerjQueryEvent(e.originalEvent,n,r)}))}},{key:"triggerjQueryEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=$.Event(t),i=this.buildDetailArgs(e,n);$(e.target).trigger(r,i),r.isDefaultPrevented()&&e.preventDefault()}},{key:"buildDetailArgs",value:function(e,t){var n=[];return t.forEach((function(t){n.push(e.detail[t])})),n}},{key:"migratejQueryAttachData",value:function(e,t,n){$(e).on(t,n,(function(e){var t=$(this).data("request-data");if(t){var n=e.detail.context.options;t.constructor==={}.constructor?Object.assign(n.data,t):"string"==typeof t&&Object.assign(n.data,ge.paramToObj("request-data",t))}}))}}],n&&Te(t.prototype,n),r&&Te(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Re=new Oe;const Ce={controller:Re,parseJSON:ge.parseJSON,serializeJSON:re.serializeJSON,requestElement:Se.fromElement,start:function(){Re.start(),window.jQuery&&(new Pe).bind()},stop:function(){Re.stop()}};function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function qe(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.oc||(window.oc={}),window.oc.AjaxFramework||(window.oc.AjaxFramework=Ce,window.oc.request=Ce.requestElement,window.oc.parseJSON=Ce.parseJSON,window.oc.serializeJSON=Ce.serializeJSON,window.oc.Events=O,"function"==typeof define&&e.amdO||"object"==("undefined"==typeof exports?"undefined":Le(exports))||Ce.start());var Fe,Ie=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"submit",value:function(e){var t=e.closest("form");t&&(t.querySelectorAll("[data-validate-for]").forEach((function(e){e.classList.remove("oc-visible")})),t.querySelectorAll("[data-validate-error]").forEach((function(e){e.classList.remove("oc-visible")})))}},{key:"validate",value:function(e,t,n,r){var i=e.closest("form"),o=[];if(i){for(var a in t){var s=t[a];o=[].concat(qe(o),qe(s));var l=i.querySelector('[data-validate-for="'+a+'"]');l&&(l.innerHTML&&!l.dataset.emptyMode||(l.dataset.emptyMode=!0,l.innerHTML=s.join(", ")),l.classList.add("oc-visible"))}var u=i.querySelector("[data-validate-error]");if(u){u.classList.add("oc-visible");var c=u.querySelectorAll("[data-message]");if(c.length>0){var f=c[0];o.forEach((function(e){var t=f.cloneNode(!0);t.innerHTML=e,f.parentNode.insertBefore(t,f.nextSibling)})),c.forEach((function(e){e.remove()}))}else u.innerHTML=n}r||O.one(i,"ajax:request-error",(function(e){e.preventDefault()}))}}}])&&De(t.prototype,n),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var He,Ne,Ue,Ve,_e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stylesheetElement=this.createStylesheetElement()}var t,n,r;return t=e,r=[{key:"defaultCSS",get:function(){return u(Fe||(e=["\n        .oc-attach-loader:after {\n            content: '';\n            display: inline-block;\n            vertical-align: middle;\n            margin-left: .4em;\n            height: 1em;\n            width: 1em;\n            animation: oc-rotate-loader 0.8s infinite linear;\n            border: .2em solid currentColor;\n            border-right-color: transparent;\n            border-radius: 50%;\n            opacity: .5;\n        }\n\n        @keyframes oc-rotate-loader {\n            0%    { transform: rotate(0deg); }\n            100%  { transform: rotate(360deg); }\n        }\n    "],t||(t=e.slice(0)),Fe=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))));var e,t}},{key:"attachLoader",get:function(){return{show:function(t){(new e).show(Qe(t))},hide:function(t){(new e).hide(Qe(t))}}}}],(n=[{key:"show",value:function(e){if(this.installStylesheetElement(),Je(e)){var t=document.createElement("span");t.className="oc-attach-loader is-inline",e.parentNode.insertBefore(t,e.nextSibling)}else e.classList.add("oc-attach-loader"),e.disabled=!0}},{key:"hide",value:function(e){Je(e)?e.nextSibling.classList.contains("oc-attach-loader")&&e.nextSibling.remove():(e.classList.remove("oc-attach-loader"),e.disabled=!1)}},{key:"showForm",value:function(e){if(void 0!==e.dataset.attachLoading&&this.show(e),e.matches("form")){var t=this;e.querySelectorAll("[data-attach-loading]").forEach((function(e){Je(e)||t.show(e)}))}}},{key:"hideForm",value:function(e){if(void 0!==e.dataset.attachLoading&&this.hide(e),e.matches("form")){var t=this;e.querySelectorAll("[data-attach-loading]").forEach((function(e){Je(e)||t.hide(e)}))}}},{key:"installStylesheetElement",value:function(){e.stylesheetReady||(document.head.insertBefore(this.stylesheetElement,document.head.firstChild),e.stylesheetReady=!0)}},{key:"createStylesheetElement",value:function(){var t=document.createElement("style");return t.textContent=e.defaultCSS,t}}])&&Me(t.prototype,n),r&&Me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Je(e){return["input","select","textarea"].includes(e.tagName.toLowerCase())}function Qe(e){if("string"==typeof e&&(e=document.querySelector(e)),!e)throw new Error("Invalid element for attach loader.");return e}function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){We(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ue=!1,(Ne="stylesheetReady")in(He=_e)?Object.defineProperty(He,Ne,{value:Ue,enumerable:!0,configurable:!0,writable:!0}):He[Ne]=Ue;var ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stylesheetElement=this.createStylesheetElement()}var t,n,r;return t=e,n=[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.installStylesheetElement();var t=e.message,n=void 0===t?"":t,r=e.type,i=void 0===r?"info":r,o=e.target,a=void 0===o?null:o,s=e.interval,l=void 0===s?5:s;e.text&&(n=e.text),e.class&&(i=e.class),a&&a.removeAttribute("data-control"),"error"===i&&this.deleteFlashMessages();var u,c=this.createFlashElement(n,i);function f(){clearInterval(u),c.removeEventListener("click",h),c.removeEventListener("extras:flash-remove",f),c.querySelector(".flash-close").removeEventListener("click",f),c.classList.remove("flash-show"),setTimeout((function(){c.remove()}),1e3)}function h(){clearInterval(u)}document.body.appendChild(c),setTimeout((function(){c.classList.add("flash-show")}),100),c.addEventListener("click",h),c.addEventListener("extras:flash-remove",f),c.querySelector(".flash-close").addEventListener("click",f),l&&0!==l&&(u=setTimeout(f,1e3*l))}},{key:"render",value:function(){var e=this;document.querySelectorAll("[data-control=flash-message]").forEach((function(t){e.show($e($e({},t.dataset),{},{target:t,message:t.innerHTML})),t.remove()}))}},{key:"deleteFlashMessages",value:function(){document.querySelectorAll(".oc-flash-message").forEach((function(e){e.dispatchEvent(new Event("extras:flash-remove"))}))}},{key:"createFlashElement",value:function(e,t){var n=document.createElement("div");return n.className="oc-flash-message "+t,n.innerHTML="<span>"+e+'</span><a class="flash-close"></a>',n}},{key:"installStylesheetElement",value:function(){e.stylesheetReady||(document.head.insertBefore(this.stylesheetElement,document.head.firstChild),e.stylesheetReady=!0)}},{key:"createStylesheetElement",value:function(){var t=document.createElement("style");return t.textContent=e.defaultCSS,t}}],r=[{key:"defaultCSS",get:function(){return u(Ve||(e=["\n        .oc-flash-message {\n            position: fixed;\n            z-index: 10300;\n            width: 500px;\n            left: 50%;\n            top: 50px;\n            margin-left: -250px;\n            color: #fff;\n            font-size: 1rem;\n            padding: 10px 30px 10px 15px;\n            border-radius: 5px;\n\n            opacity: 0;\n            transition: all 0.5s, width 0s;\n            transform: scale(0.9);\n        }\n        .oc-flash-message.flash-show {\n            opacity: 1;\n            transform: scale(1);\n        }\n        .oc-flash-message.success {\n            background: #86cB43;\n        }\n        .oc-flash-message.error {\n            background: #cc3300;\n        }\n        .oc-flash-message.warning {\n            background: #f0ad4e;\n        }\n        .oc-flash-message.info {\n            background: #5fb6f5;\n        }\n        .oc-flash-message a.flash-close {\n            box-sizing: content-box;\n            width: 1em;\n            height: 1em;\n            padding: .25em .25em;\n            background: transparent url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23FFF'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e\") center/1em auto no-repeat;\n            border: 0;\n            border-radius: .25rem;\n            opacity: .5;\n            text-decoration: none;\n            position: absolute;\n            right: .7rem;\n            top: .7rem;\n            cursor: pointer;\n        }\n        .oc-flash-message a.flash-close:hover,\n        .oc-flash-message a.flash-close:focus {\n            opacity: 1;\n        }\n        html[data-turbo-preview] .oc-flash-message {\n            opacity: 0;\n        }\n        @media (max-width: 768px) {\n            .oc-flash-message {\n                left: 1rem;\n                right: 1rem;\n                top: 1rem;\n                margin-left: 0;\n                width: auto;\n            }\n        }\n    "],t||(t=e.slice(0)),Ve=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))));var e,t}},{key:"flashMsg",value:function(t){return(new e).show(t)}}],n&&Ke(t.prototype,n),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}We(ze,"stylesheetReady",!1);var Ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.started=!1,this.enableProgressBar=function(e){var t=e.detail.context.options;null===t.progressBar&&(t.progressBar=!0)},this.showAttachLoader=function(e){this.attachLoader.showForm(e.target)}.bind(this),this.hideAttachLoader=function(e){this.attachLoader.hideForm(e.target)}.bind(this),this.validatorSubmit=function(e){this.validator.submit(e.target)}.bind(this),this.validatorValidate=function(e){this.validator.validate(e.target,e.detail.fields,e.detail.message,Ye(e.detail.context.options.flash,"validate"))}.bind(this),this.flashMessageBind=function(e){var t=e.detail.context.options,n=this;t.flash&&(t.handleErrorMessage=function(e){(Ye(t.flash,"error")||Ye(t.flash,"validate"))&&n.flashMessage.show({message:e,type:"error"})},t.handleFlashMessage=function(e,r){Ye(t.flash,r)&&n.flashMessage.show({message:e,type:r})})}.bind(this),this.flashMessageRender=function(e){this.flashMessage.render()}.bind(this),this.handleBrowserRedirect=function(e){if(!e.defaultPrevented)if(oc.useTurbo&&oc.useTurbo()){var t=oc.AjaxTurbo.controller.getLastVisitUrl();t&&(e.preventDefault(),oc.visit(t))}else{var n=function(){if(!document.referrer)return null;try{var e=new URL(document.referrer);if(e.origin!==location.origin)return null;var t=localStorage.getItem("ocPushStateReferrer");return t&&0===t.indexOf(e.pathname)?t:document.referrer}catch(e){}}();n&&(e.preventDefault(),location.assign(n))}}}var t,n,r;return t=e,(n=[{key:"start",value:function(){this.started||(addEventListener("ajax:setup",this.enableProgressBar),this.attachLoader=new _e,O.on(document,"ajax:promise","form, [data-attach-loading]",this.showAttachLoader),O.on(document,"ajax:fail","form, [data-attach-loading]",this.hideAttachLoader),O.on(document,"ajax:done","form, [data-attach-loading]",this.hideAttachLoader),this.validator=new Ie,O.on(document,"ajax:before-validate","[data-request-validate]",this.validatorValidate),O.on(document,"ajax:promise","[data-request-validate]",this.validatorSubmit),this.flashMessage=new ze,addEventListener("render",this.flashMessageRender),addEventListener("ajax:setup",this.flashMessageBind),O.on(document,"click","[data-browser-redirect-back]",this.handleBrowserRedirect),O.on(document,"ajax:before-redirect","[data-browser-redirect-back]",this.handleBrowserRedirect),this.started=!0)}},{key:"stop",value:function(){this.started&&(removeEventListener("ajax:setup",this.enableProgressBar),this.attachLoader=null,O.off(document,"ajax:promise","form, [data-attach-loading]",this.showAttachLoader),O.off(document,"ajax:fail","form, [data-attach-loading]",this.hideAttachLoader),O.off(document,"ajax:done","form, [data-attach-loading]",this.hideAttachLoader),this.validator=null,O.off(document,"ajax:before-validate","[data-request-validate]",this.validatorValidate),O.off(document,"ajax:promise","[data-request-validate]",this.validatorSubmit),this.flashMessage=null,removeEventListener("render",this.flashMessageRender),removeEventListener("ajax:setup",this.flashMessageBind),O.off(document,"click","[data-browser-redirect-back]",this.handleBrowserRedirect),O.off(document,"ajax:before-redirect","[data-browser-redirect-back]",this.handleBrowserRedirect),this.started=!1)}}])&&Ge(t.prototype,n),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ye(e,t){if(!0===e&&"validate"!==t)return!0;if("string"!=typeof e)return!1;if("*"===e)return!0;var n=!1;return e.split(",").forEach((function(e){e.trim()===t&&(n=!0)})),n}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"bind",value:function(){void 0===$.oc&&($.oc={}),$.oc.flashMsg=window.oc.flashMsg,$.oc.stripeLoadIndicator=window.oc.progressBar}}])&&et(t.prototype,n),r&&et(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),nt=new Ze;const rt={controller:nt,flashMsg:ze.flashMsg,progressBar:ue.progressBar,attachLoader:_e.attachLoader,start:function(){nt.start(),window.jQuery&&(new tt).bind()},stop:function(){nt.stop()}};function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.oc||(window.oc={}),window.oc.AjaxExtras||(window.oc.AjaxExtras=rt,window.oc.flashMsg=rt.flashMsg,window.oc.progressBar=rt.progressBar,window.oc.attachLoader=rt.attachLoader,"function"==typeof define&&e.amdO||"object"==("undefined"==typeof exports?"undefined":it(exports))||rt.start());var at=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.progressBar=new ue,this.showProgressBar=function(){n.progressBar.show({cssClass:"is-turbo"})},this.controller=t}var t,n,r;return t=e,(n=[{key:"visitProposedToLocationWithAction",value:function(e,t){var n=d();this.controller.startVisitToLocationWithAction(e,t,n)}},{key:"visitStarted",value:function(e){e.issueRequest(),e.changeHistory(),e.goToSamePageAnchor(),e.loadCachedSnapshot()}},{key:"visitRequestStarted",value:function(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||"restore"!=e.action?this.showProgressBarAfterDelay():this.showProgressBar()}},{key:"visitRequestProgressed",value:function(e){this.progressBar.setValue(e.progress)}},{key:"visitRequestCompleted",value:function(e){e.loadResponse()}},{key:"visitRequestFailedWithStatusCode",value:function(e,t){switch(t){case D:case F:case I:case M:return this.reload();default:return e.loadResponse()}}},{key:"visitRequestFinished",value:function(e){this.hideProgressBar()}},{key:"visitCompleted",value:function(e){e.followRedirect()}},{key:"pageInvalidated",value:function(){this.reload()}},{key:"visitFailed",value:function(e){}},{key:"visitRendered",value:function(e){}},{key:"showProgressBarAfterDelay",value:function(){this.controller.progressBarVisible&&(this.progressBarTimeout=window.setTimeout(this.showProgressBar,this.controller.progressBarDelay))}},{key:"hideProgressBar",value:function(){this.controller.progressBarVisible&&(this.progressBar.hide(),null!==this.progressBarTimeout&&(window.clearTimeout(this.progressBarTimeout),delete this.progressBarTimeout))}},{key:"reload",value:function(){window.location.reload()}}])&&ot(t.prototype,n),r&&ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var lt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=document.createElement("a");n.href=t,this.absoluteURL=n.href;var r=n.hash.length;r<2?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-r),this.anchor=n.hash.slice(1))}var t,n,r;return t=e,r=[{key:"currentLocation",get:function(){return this.wrap(window.location.toString())}},{key:"wrap",value:function(t){return"string"==typeof t?new e(t):null!=t?t:void 0}}],(n=[{key:"getOrigin",value:function(){return this.absoluteURL.split("/",3).join("/")}},{key:"getPath",value:function(){return(this.requestURL.match(/\/\/[^/]*(\/[^?;]*)/)||[])[1]||"/"}},{key:"getPathComponents",value:function(){return this.getPath().split("/").slice(1)}},{key:"getLastPathComponent",value:function(){return this.getPathComponents().slice(-1)[0]}},{key:"getExtension",value:function(){return(this.getLastPathComponent().match(/\.[^.]*$/)||[])[0]||""}},{key:"isHTML",value:function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)}},{key:"isPrefixedBy",value:function(e){var t,n,r=function(e){return t=e.getOrigin()+e.getPath(),n="/",t.slice(-n.length)===n?t:t+"/";var t,n}(e);return this.isEqualTo(e)||(t=this.absoluteURL,n=r,t.slice(0,n.length)===n)}},{key:"isEqualTo",value:function(e){return e&&this.absoluteURL===e.absoluteURL}},{key:"toCacheKey",value:function(){return this.requestURL}},{key:"toJSON",value:function(){return this.absoluteURL}},{key:"toString",value:function(){return this.absoluteURL}},{key:"valueOf",value:function(){return this.absoluteURL}}])&&st(t.prototype,n),r&&st(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ct=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.started=!1,this.pageLoaded=!1,this.onPopState=function(e){if(n.shouldHandlePopState()&&e.state&&e.state.ajaxTurbo){var t=e.state.ajaxTurbo,r=lt.currentLocation,i=t.restorationIdentifier;n.delegate.historyPoppedToLocationWithRestorationIdentifier(r,i)}},this.onPageLoad=function(e){l((function(){n.pageLoaded=!0}))},this.delegate=t}var t,n,r;return t=e,(n=[{key:"start",value:function(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)}},{key:"stop",value:function(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}},{key:"push",value:function(e,t){this.update(history.pushState,e,t)}},{key:"replace",value:function(e,t){this.update(history.replaceState,e,t)}},{key:"shouldHandlePopState",value:function(){return this.pageIsLoaded()}},{key:"pageIsLoaded",value:function(){return this.pageLoaded||"complete"==document.readyState}},{key:"update",value:function(e,t,n){var r={ajaxTurbo:{restorationIdentifier:n}};e.call(history,r,"",t.absoluteURL)}}])&&ut(t.prototype,n),r&&ut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ht=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.started=!1,this.onScroll=function(){n.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=t}var t,n,r;return t=e,(n=[{key:"start",value:function(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}},{key:"stop",value:function(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}},{key:"scrollToElement",value:function(e){e.scrollIntoView()}},{key:"scrollToPosition",value:function(e){var t=e.x,n=e.y;window.scrollTo(t,n)}},{key:"updatePosition",value:function(e){this.delegate.scrollPositionChanged(e)}}])&&ft(t.prototype,n),r&&ft(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var vt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keys=[],this.snapshots={},this.size=t}var t,n,r;return t=e,n=[{key:"has",value:function(e){return e.toCacheKey()in this.snapshots}},{key:"get",value:function(e){if(this.has(e)){var t=this.read(e);return this.touch(e),t}}},{key:"put",value:function(e,t){return this.write(e,t),this.touch(e),t}},{key:"read",value:function(e){return this.snapshots[e.toCacheKey()]}},{key:"write",value:function(e,t){this.snapshots[e.toCacheKey()]=t}},{key:"touch",value:function(e){var t=e.toCacheKey(),n=this.keys.indexOf(t);n>-1&&this.keys.splice(n,1),this.keys.unshift(t),this.trim()}},{key:"trim",value:function(){var e,t=dt(this.keys.splice(this.size));try{for(t.s();!(e=t.n()).done;){var n=e.value;delete this.snapshots[n]}}catch(e){t.e(e)}finally{t.f()}}}],n&&yt(t.prototype,n),r&&yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function mt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"renderView",value:function(e){var t=this,n=function(){e(),t.delegate.viewRendered(t.newBody)},r={resume:n};this.delegate.viewAllowsImmediateRender(this.newBody,r)&&n()}},{key:"invalidateView",value:function(){this.delegate.viewInvalidated()}},{key:"createScriptElement",value:function(e){if("false"===e.getAttribute("data-turbo-eval")||this.delegate.applicationHasSeenInlineScript(e))return e;var t=document.createElement("script");return t.textContent=e.textContent,t.async=!1,function(e,t){var n,r=mt(h(t.attributes));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.name,a=i.value;e.setAttribute(o,a)}}catch(e){r.e(e)}finally{r.f()}}(t,e),t}}],n&&bt(t.prototype,n),r&&bt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function Et(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return St(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jt(e,t)}function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tt(e);if(t){var i=Tt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt(this,n)}}function xt(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}var Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(o,e);var t,n,r,i=Ot(o);function o(e,t){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).delegate=e,n.htmlElement=((r=document.createElement("html")).innerHTML=t,r),n.newHead=n.htmlElement.querySelector("head")||document.createElement("head"),n.newBody=n.htmlElement.querySelector("body")||document.createElement("body"),n}return t=o,r=[{key:"render",value:function(e,t,n){return new this(e,n).render(t)}}],(n=[{key:"render",value:function(e){var t=this;this.renderView((function(){t.replaceHeadAndBody(),t.activateBodyScriptElements(),e()}))}},{key:"replaceHeadAndBody",value:function(){var e=document,t=e.documentElement,n=e.head,r=e.body;t.replaceChild(this.newHead,n),t.replaceChild(this.newBody,r)}},{key:"activateBodyScriptElements",value:function(){var e,t=Et(this.getScriptElements());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.parentNode;if(r){var i=this.createScriptElement(n);r.replaceChild(i,n)}}}catch(e){t.e(e)}finally{t.f()}}},{key:"getScriptElements",value:function(){return h(document.documentElement.querySelectorAll("script"))}}])&&At(t.prototype,n),r&&At(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(wt);function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||Lt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){if(e){if("string"==typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Dt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.detailsByOuterHTML=t.reduce((function(e,t){var n=t.outerHTML,r=n in e?e[n]:{type:Ft(t),tracked:It(t),elements:[]};return Object.assign(Object.assign({},e),function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,Object.assign(Object.assign({},r),{elements:[].concat(Ct(r.elements),[t])})))}),{})}var t,n,r;return t=e,r=[{key:"fromHeadElement",value:function(e){return new this(e?h(e.children):[])}}],(n=[{key:"getTrackedElementSignature",value:function(){var e=this;return Object.keys(this.detailsByOuterHTML).filter((function(t){return e.detailsByOuterHTML[t].tracked})).join("")}},{key:"getScriptElementsNotInDetails",value:function(e){return this.getElementsMatchingTypeNotInDetails("script",e)}},{key:"getStylesheetElementsNotInDetails",value:function(e){return this.getElementsMatchingTypeNotInDetails("stylesheet",e)}},{key:"getElementsMatchingTypeNotInDetails",value:function(e,t){var n=this;return Object.keys(this.detailsByOuterHTML).filter((function(e){return!(e in t.detailsByOuterHTML)})).map((function(e){return n.detailsByOuterHTML[e]})).filter((function(t){return t.type==e})).map((function(e){return Rt(e.elements,1)[0]}))}},{key:"getProvisionalElements",value:function(){var e=this;return Object.keys(this.detailsByOuterHTML).reduce((function(t,n){var r=e.detailsByOuterHTML[n],i=r.type,o=r.tracked,a=r.elements;return null!=i||o?a.length>1?[].concat(Ct(t),Ct(a.slice(1))):t:[].concat(Ct(t),Ct(a))}),[])}},{key:"getMetaValue",value:function(e){var t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}},{key:"findMetaElementByName",value:function(e){var t=this;return Object.keys(this.detailsByOuterHTML).reduce((function(n,r){var i=Rt(t.detailsByOuterHTML[r].elements,1)[0];return function(e,t){return"meta"==e.tagName.toLowerCase()&&e.getAttribute("name")==t}(i,e)?i:n}),void 0)}}])&&Bt(t.prototype,n),r&&Bt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ft(e){return function(e){return"script"==e.tagName.toLowerCase()}(e)?"script":function(e){var t=e.tagName.toLowerCase();return"style"==t||"link"==t&&"stylesheet"==e.getAttribute("rel")}(e)?"stylesheet":void 0}function It(e){return"reload"==e.getAttribute("data-turbo-track")}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ht=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.headDetails=t,this.bodyElement=n}var t,n,r;return t=e,n=[{key:"clone",value:function(){return new e(this.headDetails,this.bodyElement.cloneNode(!0))}},{key:"getRootLocation",value:function(){var e=this.getSetting("root","/");return new lt(e)}},{key:"getCacheControlValue",value:function(){return this.getSetting("cache-control")}},{key:"getElementForAnchor",value:function(e){try{return this.bodyElement.querySelector("[id='".concat(e,"'], a[name='").concat(e,"']"))}catch(e){return null}}},{key:"getPermanentElements",value:function(){return h(this.bodyElement.querySelectorAll("[id][data-turbo-permanent]"))}},{key:"getPermanentElementById",value:function(e){return this.bodyElement.querySelector("#".concat(e,"[data-turbo-permanent]"))}},{key:"getPermanentElementsPresentInSnapshot",value:function(e){return this.getPermanentElements().filter((function(t){var n=t.id;return e.getPermanentElementById(n)}))}},{key:"findFirstAutofocusableElement",value:function(){return this.bodyElement.querySelector("[autofocus]")}},{key:"hasAnchor",value:function(e){return null!=this.getElementForAnchor(e)}},{key:"isPreviewable",value:function(){return"no-preview"!=this.getCacheControlValue()}},{key:"isCacheable",value:function(){return"no-cache"!=this.getCacheControlValue()}},{key:"isNativeError",value:function(){return 0!=this.getSetting("visit-control",!1)}},{key:"isEnabled",value:function(){return"disable"!=this.getSetting("visit-control")}},{key:"isVisitable",value:function(){return this.isEnabled()&&"reload"!=this.getSetting("visit-control")}},{key:"getSetting",value:function(e,t){var n=this.headDetails.getMetaValue("turbo-".concat(e));return null==n?t:n}}],r=[{key:"wrap",value:function(e){return e instanceof this?e:"string"==typeof e?this.fromHTMLString(e):this.fromHTMLElement(e)}},{key:"fromHTMLString",value:function(e){var t=document.createElement("html");return t.innerHTML=e,this.fromHTMLElement(t)}},{key:"fromHTMLElement",value:function(e){var t=e.querySelector("head"),n=e.querySelector("body")||document.createElement("body");return new this(Dt.fromHeadElement(t),n)}}],n&&Mt(t.prototype,n),r&&Mt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Ut(e){return function(e){if(Array.isArray(e))return Jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_t(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _t(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xt(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wt(e);if(t){var i=Wt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kt(this,n)}}function Kt(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wt(e){return Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wt(e)}var zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xt(e,t)}(o,e);var t,n,r,i=$t(o);function o(e,t,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(a=i.call(this)).delegate=e,a.currentSnapshot=t,a.currentHeadDetails=t.headDetails,a.newSnapshot=n,a.newHeadDetails=n.headDetails,a.newBody=n.bodyElement,a.isPreview=r,a}return t=o,r=[{key:"render",value:function(e,t,n,r,i){return new this(e,n,r,i).render(t)}}],(n=[{key:"render",value:function(e){var t=this;this.shouldRender()?(this.mergeHead(),this.renderView((function(){t.replaceBody(),t.isPreview||t.focusFirstAutofocusableElement(),e()}))):this.invalidateView()}},{key:"mergeHead",value:function(){this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()}},{key:"replaceBody",value:function(){var e=this.relocateCurrentBodyPermanentElements();this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(e)}},{key:"shouldRender",value:function(){return this.currentSnapshot.isEnabled()&&this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()}},{key:"trackedElementsAreIdentical",value:function(){return this.currentHeadDetails.getTrackedElementSignature()==this.newHeadDetails.getTrackedElementSignature()}},{key:"copyNewHeadStylesheetElements",value:function(){var e,t=Vt(this.getNewHeadStylesheetElements());try{for(t.s();!(e=t.n()).done;){var n=e.value;document.head.appendChild(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"copyNewHeadScriptElements",value:function(){var e,t=Vt(this.getNewHeadScriptElements());try{for(t.s();!(e=t.n()).done;){var n=e.value;document.head.appendChild(this.bindPendingAssetLoadedEventOnce(this.createScriptElement(n)))}}catch(e){t.e(e)}finally{t.f()}}},{key:"bindPendingAssetLoadedEventOnce",value:function(e){if(!e.hasAttribute("src"))return e;var t=this;return e.addEventListener("load",(function n(){t.delegate.decrementPendingAsset(),e.removeEventListener("load",n)})),this.delegate.incrementPendingAsset(),e}},{key:"removeCurrentHeadProvisionalElements",value:function(){var e,t=Vt(this.getCurrentHeadProvisionalElements());try{for(t.s();!(e=t.n()).done;){var n=e.value;document.head.removeChild(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"copyNewHeadProvisionalElements",value:function(){var e,t=Vt(this.getNewHeadProvisionalElements());try{for(t.s();!(e=t.n()).done;){var n=e.value;document.head.appendChild(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"relocateCurrentBodyPermanentElements",value:function(){var e=this;return this.getCurrentBodyPermanentElements().reduce((function(t,n){var r=e.newSnapshot.getPermanentElementById(n.id);if(r){var i=function(e){var t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",e.id),{element:t,permanentElement:e}}(n);return Gt(n,i.element),Gt(r,n),[].concat(Ut(t),[i])}return t}),[])}},{key:"replacePlaceholderElementsWithClonedPermanentElements",value:function(e){var t,n=Vt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;Gt(r.element,r.permanentElement.cloneNode(!0))}}catch(e){n.e(e)}finally{n.f()}}},{key:"activateNewBodyScriptElements",value:function(){var e,t=Vt(this.getNewBodyScriptElements());try{for(t.s();!(e=t.n()).done;){var n=e.value;Gt(n,this.createScriptElement(n))}}catch(e){t.e(e)}finally{t.f()}}},{key:"assignNewBody",value:function(){Gt(document.body,this.newBody)}},{key:"focusFirstAutofocusableElement",value:function(){var e=this.newSnapshot.findFirstAutofocusableElement();(function(e){return e&&"function"==typeof e.focus})(e)&&e.focus()}},{key:"getNewHeadStylesheetElements",value:function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)}},{key:"getNewHeadScriptElements",value:function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)}},{key:"getCurrentHeadProvisionalElements",value:function(){return this.currentHeadDetails.getProvisionalElements()}},{key:"getNewHeadProvisionalElements",value:function(){return this.newHeadDetails.getProvisionalElements()}},{key:"getCurrentBodyPermanentElements",value:function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)}},{key:"getNewBodyScriptElements",value:function(){return h(this.newBody.querySelectorAll("script"))}}])&&Qt(t.prototype,n),r&&Qt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(wt);function Gt(e,t){var n=e.parentElement;if(n)return n.replaceChild(t,e)}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Yt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.htmlElement=document.documentElement,this.delegate=t}var t,n,r;return t=e,(n=[{key:"getRootLocation",value:function(){return this.getSnapshot().getRootLocation()}},{key:"getElementForAnchor",value:function(e){return this.getSnapshot().getElementForAnchor(e)}},{key:"getSnapshot",value:function(){return Ht.fromHTMLElement(this.htmlElement)}},{key:"render",value:function(e,t){var n=e.snapshot,r=e.error,i=e.isPreview;this.markAsPreview(i),n?this.renderSnapshot(n,i,t):this.renderError(r,t)}},{key:"markAsPreview",value:function(e){e?this.htmlElement.setAttribute("data-turbo-preview",""):this.htmlElement.removeAttribute("data-turbo-preview")}},{key:"renderSnapshot",value:function(e,t,n){zt.render(this.delegate,n,this.getSnapshot(),e,t||!1)}},{key:"renderError",value:function(e,t){Pt.render(this.delegate,t,e||"")}}])&&Zt(t.prototype,n),r&&Zt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function en(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nn="visitStart",rn="requestStart",on="requestEnd",an="visitEnd",sn="initialized",ln="started",un="canceled",cn="failed",fn="completed",hn=function(){function e(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d();en(this,e),this.identifier=d(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.progress=0,this.scrolled=!1,this.snapshotCached=!1,this.state=sn,this.performScroll=function(){i.scrolled||("restore"==i.action?i.scrollToRestoredPosition()||i.scrollToTop():i.scrollToAnchor()||i.scrollToTop(),i.scrolled=!0)},this.controller=t,this.location=n,this.action=r,this.adapter=t.adapter,this.restorationIdentifier=o,this.isSamePage=this.locationChangeIsSamePage()}var t,n,r;return t=e,n=[{key:"start",value:function(){this.state==sn&&(this.recordTimingMetric(nn),this.state=ln,this.adapter.visitStarted(this))}},{key:"cancel",value:function(){this.state==ln&&(this.request&&this.request.abort(),this.cancelRender(),this.state=un)}},{key:"complete",value:function(){this.state==ln&&(this.recordTimingMetric(an),this.state=fn,this.adapter.visitCompleted(this),this.controller.visitCompleted(this))}},{key:"fail",value:function(){this.state==ln&&(this.state=cn,this.adapter.visitFailed(this))}},{key:"changeHistory",value:function(){if(!this.historyChanged){var e=this.location.isEqualTo(this.referrer)?"replace":this.action;this.getHistoryMethodForAction(e).call(this.controller,this.location,this.restorationIdentifier),this.historyChanged=!0}}},{key:"issueRequest",value:function(){if(this.shouldIssueRequest()&&!this.request){var e=lt.wrap(this.location).absoluteURL,t={method:"GET",headers:{},htmlOnly:!0,timeout:240};t.headers.Accept="text/html, application/xhtml+xml",t.headers["X-PJAX"]=1,this.hasCachedSnapshot()&&(t.headers["X-PJAX-CACHED"]=1),this.referrer&&(t.headers["X-PJAX-REFERRER"]=lt.wrap(this.referrer).absoluteURL),this.progress=0,this.request=new H(this,e,t),this.request.send()}}},{key:"getCachedSnapshot",value:function(){var e=this.controller.getCachedSnapshotForLocation(this.location);if(e&&(!this.location.anchor||e.hasAnchor(this.location.anchor))&&("restore"==this.action||e.isPreviewable()))return e}},{key:"hasCachedSnapshot",value:function(){return null!=this.getCachedSnapshot()}},{key:"loadCachedSnapshot",value:function(){var e=this,t=this.getCachedSnapshot();if(t){var n=this.shouldIssueRequest();this.render((function(){e.cacheSnapshot(),e.isSamePage?(e.performScroll(),e.adapter.visitRendered(e)):(e.controller.render({snapshot:t,isPreview:n},e.performScroll),e.adapter.visitRendered(e),n||e.complete())}))}}},{key:"loadResponse",value:function(){var e=this,t=this.request,n=this.response;t&&n&&this.render((function(){var r=Ht.fromHTMLString(n);e.cacheSnapshot(),t.failed&&!r.isNativeError()?(e.controller.render({error:n},e.performScroll),e.adapter.visitRendered(e),e.fail()):(e.controller.render({snapshot:r},e.performScroll),e.adapter.visitRendered(e),e.complete())}))}},{key:"followRedirect",value:function(){this.redirectedToLocation&&!this.followedRedirect&&(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0)}},{key:"goToSamePageAnchor",value:function(){var e=this;this.isSamePage&&this.render((function(){e.cacheSnapshot(),e.performScroll(),e.adapter.visitRendered(e)}))}},{key:"requestStarted",value:function(){this.recordTimingMetric(rn),this.adapter.visitRequestStarted(this)}},{key:"requestProgressed",value:function(e){this.progress=e,this.adapter.visitRequestProgressed&&this.adapter.visitRequestProgressed(this)}},{key:"requestCompletedWithResponse",value:function(e,t,n){this.response=e,this.redirectedToLocation=lt.wrap(n),this.adapter.visitRequestCompleted(this)}},{key:"requestFailedWithStatusCode",value:function(e,t){this.response=t,this.adapter.visitRequestFailedWithStatusCode(this,e)}},{key:"requestFinished",value:function(){this.recordTimingMetric(on),this.adapter.visitRequestFinished(this)}},{key:"scrollToRestoredPosition",value:function(){var e=this.restorationData?this.restorationData.scrollPosition:void 0;if(e)return this.controller.scrollToPosition(e),!0}},{key:"scrollToAnchor",value:function(){if(null!=this.location.anchor)return this.controller.scrollToAnchor(this.location.anchor),!0}},{key:"scrollToTop",value:function(){this.controller.scrollToPosition({x:0,y:0})}},{key:"recordTimingMetric",value:function(e){this.timingMetrics[e]=(new Date).getTime()}},{key:"getTimingMetrics",value:function(){return Object.assign({},this.timingMetrics)}},{key:"getHistoryMethodForAction",value:function(e){switch(e){case"swap":case"replace":return this.controller.replaceHistoryWithLocationAndRestorationIdentifier;case"advance":case"restore":return this.controller.pushHistoryWithLocationAndRestorationIdentifier}}},{key:"shouldIssueRequest",value:function(){return"restore"==this.action?!this.hasCachedSnapshot():!this.isSamePage}},{key:"locationChangeIsSamePage",value:function(){if("swap"==this.action)return!0;var e="restore"==this.action&&this.controller.lastRenderedLocation;return this.controller.locationIsSamePageAnchor(e||this.location)}},{key:"cacheSnapshot",value:function(){this.snapshotCached||(this.controller.cacheSnapshot(),this.snapshotCached=!0)}},{key:"render",value:function(e){var t=this;this.cancelRender(),this.frame=requestAnimationFrame((function(){delete t.frame,e.call(t)}))}},{key:"cancelRender",value:function(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}],n&&tn(t.prototype,n),r&&tn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var mn=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adapter=new at(this),this.history=new ct(this),this.restorationData={},this.scrollManager=new ht(this),this.useScroll=!0,this.view=new Yt(this),this.cache=new vt(10),this.enabled=!0,this.pendingAssets=0,this.progressBarDelay=500,this.progressBarVisible=!0,this.started=!1,this.uniqueInlineScripts=[],this.currentVisit=null,this.historyVisit=null,this.pageLoaded=function(){t.lastRenderedLocation=t.location,t.notifyApplicationAfterPageLoad(),t.notifyApplicationAfterPageAndScriptsLoad(),t.observeInlineScripts()},this.clickCaptured=function(){removeEventListener("click",t.clickBubbled,!1),addEventListener("click",t.clickBubbled,!1)},this.clickBubbled=function(e){if(t.enabled&&t.clickEventIsSignificant(e)){var n=t.getVisitableLinkForTarget(e.target);if(n){var r=t.getVisitableLocationForLink(n);if(r&&t.applicationAllowsFollowingLinkToLocation(n,r)){e.preventDefault();var i=t.getActionForLink(n),o=t.useScrollForLink(n);t.visit(r,{action:i,scroll:o})}}}}}var t,n,r;return t=e,n=[{key:"start",value:function(){e.supported&&!this.started&&(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=this.documentIsEnabled())}},{key:"disable",value:function(){this.enabled=!1}},{key:"stop",value:function(){this.started&&(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1)}},{key:"isEnabled",value:function(){return this.started&&this.enabled}},{key:"clearCache",value:function(){this.cache=new vt(10)}},{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=lt.wrap(e);var n=t.action||"advance";this.applicationAllowsVisitingLocation(e,n)&&(this.locationIsVisitable(e)?(this.useScroll=!1!==t.scroll,this.adapter.visitProposedToLocationWithAction(e,n)):window.location.href=e.toString())}},{key:"startVisitToLocationWithAction",value:function(t,n,r){if(e.supported){var i=this.getRestorationDataForIdentifier(r);this.startVisit(lt.wrap(t),n,{restorationData:i})}else window.location.href=t.toString()}},{key:"setProgressBarVisible",value:function(e){this.progressBarVisible=e}},{key:"setProgressBarDelay",value:function(e){this.progressBarDelay=e}},{key:"startHistory",value:function(){this.location=lt.currentLocation,this.restorationIdentifier=d(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)}},{key:"stopHistory",value:function(){this.history.stop()}},{key:"getLastVisitUrl",value:function(){if(this.historyVisit)return this.historyVisit.referrer.absoluteURL}},{key:"pushHistoryWithLocationAndRestorationIdentifier",value:function(e,t){this.historyVisit=this.currentVisit,this.location=lt.wrap(e),this.restorationIdentifier=t,this.history.push(this.location,this.restorationIdentifier)}},{key:"replaceHistoryWithLocationAndRestorationIdentifier",value:function(e,t){this.location=lt.wrap(e),this.restorationIdentifier=t,this.history.replace(this.location,this.restorationIdentifier)}},{key:"historyPoppedToLocationWithRestorationIdentifier",value:function(e,t){if(this.enabled){this.location=e,this.restorationIdentifier=t;var n=this.getRestorationDataForIdentifier(t);this.startVisit(e,"restore",{restorationIdentifier:t,restorationData:n,historyChanged:!0})}else this.adapter.pageInvalidated()}},{key:"getCachedSnapshotForLocation",value:function(e){var t=this.cache.get(e);return t?t.clone():t}},{key:"shouldCacheSnapshot",value:function(){return this.view.getSnapshot().isCacheable()}},{key:"cacheSnapshot",value:function(){var e=this;if(this.shouldCacheSnapshot()){this.notifyApplicationBeforeCachingSnapshot();var t=this.view.getSnapshot(),n=this.lastRenderedLocation||lt.currentLocation;l((function(){return e.cache.put(n,t.clone())}))}}},{key:"scrollToAnchor",value:function(e){var t=this.view.getElementForAnchor(e);t?this.scrollToElement(t):this.scrollToPosition({x:0,y:0})}},{key:"scrollToElement",value:function(e){this.scrollManager.scrollToElement(e)}},{key:"scrollToPosition",value:function(e){this.scrollManager.scrollToPosition(e)}},{key:"scrollPositionChanged",value:function(e){this.getCurrentRestorationData().scrollPosition=e}},{key:"incrementPendingAsset",value:function(){this.pendingAssets++}},{key:"decrementPendingAsset",value:function(){this.pendingAssets--,0===this.pendingAssets&&(this.notifyApplicationAfterPageAndScriptsLoad(),this.notifyApplicationAfterLoadScripts())}},{key:"render",value:function(e,t){this.view.render(e,t)}},{key:"viewInvalidated",value:function(){this.adapter.pageInvalidated()}},{key:"viewAllowsImmediateRender",value:function(e,t){return this.notifyApplicationUnload(),!this.notifyApplicationBeforeRender(e,t).defaultPrevented}},{key:"viewRendered",value:function(){this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()}},{key:"observeInlineScripts",value:function(){var e=this;document.documentElement.querySelectorAll("script[data-turbo-eval-once]").forEach((function(t){return e.applicationHasSeenInlineScript(t)}))}},{key:"applicationHasSeenInlineScript",value:function(e){var t=e.getAttribute("data-turbo-eval-once");if(!t)return!1;var n=!!this.uniqueInlineScripts[t];return this.uniqueInlineScripts[t]=!0,n}},{key:"applicationAllowsFollowingLinkToLocation",value:function(e,t){return!this.notifyApplicationAfterClickingLinkToLocation(e,t).defaultPrevented}},{key:"applicationAllowsVisitingLocation",value:function(e,t){return!this.notifyApplicationBeforeVisitingLocation(e,t).defaultPrevented}},{key:"notifyApplicationAfterClickingLinkToLocation",value:function(e,t){return s("page:click",{target:e,detail:{url:t.absoluteURL}})}},{key:"notifyApplicationBeforeVisitingLocation",value:function(e,t){return s("page:before-visit",{detail:{url:e.absoluteURL,action:t}})}},{key:"notifyApplicationAfterVisitingLocation",value:function(e){return s("page:visit",{detail:{url:e.absoluteURL},cancelable:!1})}},{key:"notifyApplicationBeforeCachingSnapshot",value:function(){return s("page:before-cache",{cancelable:!1})}},{key:"notifyApplicationBeforeRender",value:function(e,t){return s("page:before-render",{detail:pn({newBody:e},t)})}},{key:"notifyApplicationAfterRender",value:function(){return s("page:render",{cancelable:!1})}},{key:"notifyApplicationAfterPageLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s("page:load",{detail:{url:this.location.absoluteURL,timing:e},cancelable:!1})}},{key:"notifyApplicationAfterPageAndScriptsLoad",value:function(){return s("page:loaded",{cancelable:!1})}},{key:"notifyApplicationAfterLoadScripts",value:function(){return s("page:updated",{cancelable:!1})}},{key:"notifyApplicationUnload",value:function(){return s("page:unload",{cancelable:!1})}},{key:"startVisit",value:function(e,t,n){this.currentVisit&&this.currentVisit.cancel(),this.currentVisit=this.createVisit(e,t,n),this.currentVisit.scrolled=!this.useScroll,this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(e)}},{key:"createVisit",value:function(e,t,n){var r=new hn(this,e,t,n.restorationIdentifier);return r.restorationData=Object.assign({},n.restorationData||{}),r.historyChanged=!!n.historyChanged,r.referrer=this.location,r}},{key:"visitCompleted",value:function(e){this.notifyApplicationAfterPageLoad(e.getTimingMetrics()),0===this.pendingAssets&&(this.notifyApplicationAfterPageAndScriptsLoad(),this.notifyApplicationAfterLoadScripts())}},{key:"clickEventIsSignificant",value:function(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},{key:"getVisitableLinkForTarget",value:function(e){if(e instanceof Element&&this.elementIsVisitable(e)){var t=e.closest("a[href]:not([download])");return t&&t.getAttribute("target")&&"_self"!=t.getAttribute("target")?null:t}}},{key:"getVisitableLocationForLink",value:function(e){var t=new lt(e.getAttribute("href")||"");if(this.locationIsVisitable(t))return t}},{key:"getActionForLink",value:function(e){var t=e.getAttribute("data-turbo-action");return this.isAction(t)?t:"advance"}},{key:"useScrollForLink",value:function(e){return null===e.getAttribute("data-turbo-no-scroll")}},{key:"isAction",value:function(e){return"advance"==e||"replace"==e||"restore"==e||"swap"==e}},{key:"documentIsEnabled",value:function(){var e=document.documentElement.querySelector('head meta[name="turbo-visit-control"]');return!e||"disable"!=e.getAttribute("content")}},{key:"elementIsVisitable",value:function(e){var t=e.closest("[data-turbo]");return!t||"false"!=t.getAttribute("data-turbo")}},{key:"locationIsVisitable",value:function(e){return e.isPrefixedBy(this.view.getRootLocation())&&e.isHTML()}},{key:"locationIsSamePageAnchor",value:function(e){return void 0!==e.anchor&&e.requestURL==this.location.requestURL}},{key:"getCurrentRestorationData",value:function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)}},{key:"getRestorationDataForIdentifier",value:function(e){return e in this.restorationData||(this.restorationData[e]={}),this.restorationData[e]}}],n&&vn(t.prototype,n),r&&vn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();mn.supported=!!(window.history.pushState&&window.requestAnimationFrame&&window.addEventListener);var gn=new mn;const bn={get supported(){return mn.supported},controller:gn,visit:function(e,t){gn.visit(e,t)},clearCache:function(){gn.clearCache()},setProgressBarVisible:function(e){gn.setProgressBarVisible(e)},setProgressBarDelay:function(e){gn.setProgressBarDelay(e)},start:function(){gn.start()},isEnabled:function(){return gn.isEnabled()}};function wn(e){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}window.oc||(window.oc={}),window.oc.AjaxTurbo||(window.oc.AjaxTurbo=bn,window.oc.visit=bn.visit,window.oc.useTurbo=bn.isEnabled,"function"==typeof define&&e.amdO||"object"==("undefined"==typeof exports?"undefined":wn(exports))||bn.start())})();